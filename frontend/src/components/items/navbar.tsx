import {
  Menubar,
  MenubarContent,
  MenubarItem,
  MenubarMenu,
  MenubarSeparator,
  MenubarShortcut,
  MenubarTrigger,
} from "@/components/ui/menubar";
import { FaAlignRight } from "react-icons/fa";
import { IoLogOutOutline, IoPersonOutline } from "react-icons/io5";
import { GoCodescanCheckmark } from "react-icons/go";

import React from "react";
import { useRouter } from "next/navigation";
import { useSelector } from "react-redux";

const Navbar: React.FC = () => {
  const router = useRouter();
  const logout = () => {
    fetch("http://localhost:4000/api/logout", {
      credentials: "include",
    });
    router.push("/login");
  };
  const userDetail = useSelector((state: any) => state.userDetail);

  return (
    <div className="fixed top-0 w-screen flex justify-between items-center py-2 px-6 shadow-sm">
      <div>
        <h1 className="text-2xl font-bold italic">
          BUGGY<span className="text-[#ccc] text-xl">.com</span>
        </h1>
      </div>

      <div className="flex flex-1 justify-end items-center gap-4">
        <h1 className="text-lg animate-out">
          {" "}
          Welcome, <span className="font-semibold">{userDetail.name}</span>
        </h1>
        <Menubar>
          <MenubarMenu>
            <MenubarTrigger>
              <FaAlignRight />
            </MenubarTrigger>
            <MenubarContent>
              <MenubarItem>
                <GoCodescanCheckmark />
                <span className="ml-2">New Scan</span>
              </MenubarItem>
              <MenubarSeparator />
              {
                <MenubarItem>
                  <IoPersonOutline />
                  <span className="ml-2">Profile</span>
                </MenubarItem>
              }
              <MenubarItem onClick={() => logout()}>
                <IoLogOutOutline />
                <span className="ml-2">Logout</span>
              </MenubarItem>
            </MenubarContent>
          </MenubarMenu>
        </Menubar>
      </div>
    </div>
  );
};

export default Navbar;
